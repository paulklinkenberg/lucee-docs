<!DOCTYPE html>
<html>
	<head>
		<title>Lucee Documentation :: Using Lucee in Java</title>
		<base href="../../">

		<meta content="initial-scale=1.0, width=device-width" name="viewport">

		<link href="assets/css/base.min.css" rel="stylesheet">
		<link href="assets/css/highlight.css" rel="stylesheet">
		<link rel="icon" type="image/png" href="assets/images/favicon.png">

		<!-- ie -->
		<!--[if lt IE 9]>
			<script src="assets/js/html5shiv.js" type="text/javascript"></script>
			<script src="assets/js/respond.js" type="text/javascript"></script>
		<![endif]-->
	</head>

	<body class="page">
		<nav class="menu menu-left nav-drawer" id="menu">
			<div class="menu-scroll">
				<div class="menu-wrap">
					<div class="menu-content">
						<a class="nav-drawer-logo" href="index.html"><img class="Lucee" src="assets/images/lucee-logo-bw.png"></a>
						<ul class="nav">
		
			
		
			
		
			
				
				
				<li class="active ">

					<a href="guides/getting-started.html">Getting Started</a>

					
					


					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="reference.html">Reference</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#reference" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="reference">
							
						
							
								
								
								<li><a href="reference/functions.html">Lucee functions</a></li>
							
						
							
								
								
								<li><a href="reference/tags.html">Lucee tags</a></li>
							
						
							
								
								
								<li><a href="reference/unsupported.html">Unsupported Tags &amp; Functions</a></li>
							
						
							
								
								
								<li><a href="reference/additional.html">Additional Tags &amp; Functions</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class="active ">

					<a href="guides.html">Guides and tutorials</a>

					
					


					
						<span class="menu-collapse-toggle " data-target="#guides" data-toggle="collapse" aria-expanded="true">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse expand" id="guides">
							
						
							
								
								
									
								
								<li class="active"><a href="guides/getting-started.html">Getting Started</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/running-lucee.html">Running Lucee</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/updating-lucee.html">Updating Lucee</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/cookbooks.html">Cookbook</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/working-with-source.html">Working with the Lucee Source</a></li>
							
						
							
								
								
								<li><a href="guides/extensions.html">Extensions</a></li>
							
						
							
								
								
								<li><a href="guides/about-lucee.html">About Lucee</a></li>
							
						
							
								
								
								<li><a href="guides/lucee-5.html">Lucee 5</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="categories.html">Categories</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#categories" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="categories">
							
						
							
								
								
								<li><a href="categories/ajax.html">Ajax features</a></li>
							
						
							
								
								
								<li><a href="categories/array.html">Arrays</a></li>
							
						
							
								
								
								<li><a href="categories/binary.html">Binary data</a></li>
							
						
							
								
								
								<li><a href="categories/boolean.html">Booleans</a></li>
							
						
							
								
								
								<li><a href="categories/collection.html">Collections</a></li>
							
						
							
								
								
								<li><a href="categories/component.html">Components (CFCs)</a></li>
							
						
							
								
								
								<li><a href="categories/currency.html">Currency features</a></li>
							
						
							
								
								
								<li><a href="categories/date.html">Date and time</a></li>
							
						
							
								
								
								<li><a href="categories/decision.html">Decision logic</a></li>
							
						
							
								
								
								<li><a href="categories/formatting.html">Formatting</a></li>
							
						
							
								
								
								<li><a href="categories/html.html">HTML</a></li>
							
						
							
								
								
								<li><a href="categories/image.html">Image manipulation</a></li>
							
						
							
								
								
								<li><a href="categories/javascript.html">JavaScript</a></li>
							
						
							
								
								
								<li><a href="categories/json.html">JSON</a></li>
							
						
							
								
								
								<li><a href="categories/ldap.html">LDAP</a></li>
							
						
							
								
								
								<li><a href="categories/list.html">Lists</a></li>
							
						
							
								
								
								<li><a href="categories/math.html">Math</a></li>
							
						
							
								
								
								<li><a href="categories/number.html">Numbers</a></li>
							
						
							
								
								
								<li><a href="categories/parsing.html">Parsing</a></li>
							
						
							
								
								
								<li><a href="categories/pdf.html">PDFs</a></li>
							
						
							
								
								
								<li><a href="categories/query.html">Queries</a></li>
							
						
							
								
								
								<li><a href="categories/regex.html">Regex</a></li>
							
						
							
								
								
								<li><a href="categories/sort.html">Sorting</a></li>
							
						
							
								
								
								<li><a href="categories/string.html">Strings</a></li>
							
						
							
								
								
								<li><a href="categories/struct.html">Structures</a></li>
							
						
							
								
								
								<li><a href="categories/video.html">Video</a></li>
							
						
							
								
								
								<li><a href="categories/wddx.html">WDDX</a></li>
							
						
							
								
								
								<li><a href="categories/webservice.html">Web services</a></li>
							
						
							
								
								
								<li><a href="categories/xml.html">XML</a></li>
							
						
							
								
								
								<li><a href="categories/zip.html">Zip files</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="docs.html">About the docs</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#about" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="about">
							
						
							
								
								
								<li><a href="docs/content.html">Content</a></li>
							
						
							
								
								
								<li><a href="docs/build.html">Build</a></li>
							
						
					
						</ul>
					
				</li>
			
		
	</ul>
						<hr>
						<ul class="nav">
							<li>
								<a href="http://lucee.org"><span class="fa fa-fw fa-globe"></span>Lucee Website</a>
							</li>
							<li>
								<a href="https://github.com/lucee/lucee-docs"><span class="fa fa-fw fa-github"></span>Source repository</a>
							</li>
							<li>
								<a href="http://javadoc.lucee.org"><span class="fa fa-fw fa-code"></span>JavaDocs</a>
							</li>
							<li>
								<a href="download.html"><span class="fa fa-fw fa-download"></span>Download</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

		<header class="header">
			<ul class="hidden-lg nav nav-list pull-left">
				<li>
					<a class="menu-toggle" href="#menu">
						<span class="access-hide">Menu</span>
						<span class="icon icon-menu icon-lg"></span>
						<span class="header-close icon icon-close icon-lg"></span>
					</a>
				</li>
			</ul>
			<a class="header-logo hidden-lg" href="index.html"><img alt="Lucee" src="assets/images/lucee-logo.png"></a>
			<ul class="nav nav-list pull-right">
				
				
				
					<li>
						<a href="/guides/working-with-source/build-from-source.html">
							<span class="access-hide">Previous page: Building Lucee from source</span>
							<span class="icon icon-arrow-back icon-lg"></span>
						</a>
					</li>
				
				
					<li>
						<a href="/guides/extensions.html">
							<span class="access-hide">Previous page: Extensions</span>
							<span class="icon icon-arrow-forward icon-lg"></span>
						</a>
					</li>
				
				<li>
					<a class="menu-toggle" href="#search">
						<span class="access-hide">Search</span>
						<span class="icon icon-search icon-lg"></span>
						<span class="header-close icon icon-close icon-lg"></span>
					</a>
				</li>
			</ul>
			<span class="header-fix-show header-logo pull-none text-overflow">Using Lucee in Java</span>
		</header>
		<div class="menu menu-right menu-search" id="search">
			<div class="menu-scroll">
				<div class="menu-wrap">
					<div class="menu-content">
						<div class="menu-content-inner">
							<label class="access-hide" for="lucee-docs-search-input">Search</label>
							<input class="form-control form-control-lg menu-search-focus" id="lucee-docs-search-input" placeholder="Search" type="search">
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="content">
			<div class="content-heading">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1">
							<h1 class="heading">Using Lucee in Java</h1>
						</div>
					</div>
				</div>
			</div>

			<div class="content-inner">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1 body">
							<div class="tile-wrap">
								<div class="tile">
									<ul class="breadcrumb margin-no-top margin-right margin-no-bottom margin-left">
			<li><a href="index.html">Home</a></li>
			
				<li><a href="guides.html">Guides and tutorials</a></li>
			
				<li><a href="guides/working-with-source.html">Working with the Lucee Source</a></li>
			
			<li class="active">Using Lucee in Java</li>
		</ul>
								</div>
							</div>
							<a class="pull-right" href="https://github.com/lucee/lucee-docs/edit/master/docs/04.guides/05.working-with-source/02.java-using-lucee-in-java/page.md" title="Improve the docs"><i class="fa fa-pencil fa-fw"></i></a>
	<h1>Using Lucee within Java</h1><p>While Lucee allows you to do almost everything your web application will need to do by using CFML code, there may be times when you will need to use Lucee from Java applications.</p><p>Since Lucee is written in Java and is running inside a Java Virtual Machine (JVM), using Lucee from your Java applications is very easy.</p><h2>Adding Lucee to your Java Project</h2><p>The first thing you will need to do is to add <code>lucee.jar</code> to your classpath, so that you will have access to the classes and interfaces that Lucee provides. if you are using an IDE like Eclipse or Netbeans, then you simply add the <code>lucee.jar</code> library to your project.</p><p>Once you added <code>lucee.jar</code> to your project, you should have access to all of Lucee's public classes and interfaces. In order to access them you will need to add the import statement to the top of your class file. be sure to add an import statement for each of the classes / interfaces that you plan to use in that class. you can review the Lucee JavaDoc files at</p><p>http://javadoc.lucee.org</p><h2>Using Lucee from your Java code</h2><p>There are two cases in which you might want to use Lucee from your Java code:</p>
<ul>
  <li>When your Java code is loaded into the JVM through Lucee.</li>
  <li>In a standalone application detached from a Lucee web app.</li>
</ul><h3>When your Java code was loaded by Lucee</h3><p>The easiest way to use Lucee from your Java code is when your Java code was loaded by Lucee. this is a common case when, for example, your CFML code creates a Java object, and then that Java object creates Lucee objects and calls CFC methods.</p><p>Your interaction with Lucee should start via an object that implements the lucee.loader.engine.CFMLEngine interface (http://www.lucee.org/javadoc/lucee/loader/engine/CFMLEngine.html) and the lucee.runtime.PageContext (http://www.lucee.org/javadoc/lucee/runtime/PageContext.html) object. Since Lucee loaded your Java code, and it will be running in that very same JVM, you can get a reference to a CFMLEngine object by calling the getInstance() static method of the lucee.loader.engine.CFMLEngineFactory object.</p>
<div class="highlight"><pre><span class="kn">import</span>	<span class="nn">lucee.loader.engine.*</span><span class="o">;</span>
<span class="o">...</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>

	<span class="n">CFMLEngine</span>	<span class="n">engine</span>	<span class="o">=</span> <span class="n">CFMLEngineFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
	<span class="n">PageContext</span> 	<span class="n">pc</span> 	<span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="na">getThreadPageContext</span><span class="o">();</span>
	<span class="o">...</span>
<span class="o">}</span>
</pre></div><p>in the following examples in this document "engine" will refer to a lucee.loader.engine.CFMLEngine object, and "pc" will refer to a lucee.runtime.PageContext object.</p><h3>When Lucee does not load your Java code</h3><p><strong>Lucee 5</strong></p><p>With Lucee 5 doing this is a lot easier now. <div class="highlight"><pre><span class="n">CFMLEngine</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">CFMLEngineFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>  <span class="c1">// cookies for this simulated request, can also be null</span>  <span class="n">javax</span><span class="o">.</span><span class="na">servlet</span><span class="o">.</span><span class="na">http</span><span class="o">.</span><span class="na">Cookie</span><span class="o">[]</span> <span class="n">cookies</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Cookie</span><span class="o">[]{</span><span class="k">new</span> <span class="n">Cookie</span><span class="o">(</span><span class="s">&quot;myCookie&quot;</span><span class="o">,</span><span class="s">&quot;myCookieValue&quot;</span><span class="o">)};</span></p>
<pre><code>    &lt;span class=&quot;c1&quot;&gt;// headers for this simulated request&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;accept&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;text/html&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// headers for this simulated request, can also be null&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// headers for this simulated request, can also be null&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;PageContext&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createPageContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;&amp;quot;localhost&amp;quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// host&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;/index.cfm&amp;quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// script name&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;test=1&amp;quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// query string&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cookies&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;attributes&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// response stream where the output is written to&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50000&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// timeout for the simulated request in milli seconds&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// register the pc to the thread&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;// use the pc&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;finally&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;engine&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;releasePageContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/* unregister the pc from the thread*/&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
</code></pre><p></pre></div></p><h2>Using the Lucee objects from Java</h2><p>once you have a reference to the CFMLEngine and the PageContext objects, you can easily interact with Lucee from your code. here is an example on how to get / set Lucee values from within your Java code:</p>
<div class="highlight"><pre><span class="c1">// get a reference to the Application Scope:</span>
<span class="n">Scope</span>	<span class="n">appScope</span>	<span class="o">=</span>	<span class="n">pc</span><span class="o">.</span><span class="na">applicationScope</span><span class="o">();</span>

<span class="c1">// get a value from the Application Scope:</span>
<span class="n">String</span>	<span class="n">appName1</span>	<span class="o">=</span>	<span class="n">appScope</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="s">&quot;ApplicationName&quot;</span> <span class="o">);</span>

<span class="c1">// you can also get the value from the PageContext directly:</span>
<span class="n">String</span>	<span class="n">appName2</span>	<span class="o">=</span> 	<span class="n">pc</span><span class="o">.</span><span class="na">getVariable</span><span class="o">(</span> <span class="s">&quot;Application.ApplicationName&quot;</span> <span class="o">);</span>

<span class="k">if</span> <span class="o">(</span> <span class="o">!</span><span class="n">appName1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span> <span class="n">appName2</span> <span class="o">)</span> <span class="o">)</span>
	<span class="k">throw</span> <span class="n">CFMLEngineFactory</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getExceptionUtil</span><span class="o">().</span><span class="na">createApplicationException</span><span class="o">(</span> <span class="s">&quot;WTF?!@#&quot;</span> <span class="o">);</span>
</pre></div><p>you can also set variables in a similar manner:</p>
<div class="highlight"><pre><span class="c1">// this is the Java equivalent of &lt;cfset Application.javaTime = getTickCount()&gt;</span>
<span class="n">pc</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span> <span class="s">&quot;Application.javaTime&quot;</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">);</span>
</pre></div><p>then in your CFML code, you can use this value like so:</p>
<div class="highlight"><pre><span class="nb">&lt;cfoutput&gt;</span>The Tick Count set from Java was: <span class="p">#</span><span class="nv">Application.javaTime</span><span class="p">#</span><span class="nb">&lt;/cfoutput&gt;</span>
</pre></div><p>in the same way you can get a reference to other objects in the different scopes. for example, if in onApplicationStart() (of Application.cfc) your Lucee code creates somewhere a component and sets a reference to it in Application.myCfc</p>
<div class="highlight"><pre><span class="nb">&lt;cffunction</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;onApplicationStart&quot;</span><span class="nb">&gt;</span>

	<span class="nb">&lt;cfset</span> <span class="nv">Application.myCfc</span> <span class="o">=</span> <span class="nf">createObject</span><span class="p">(</span> <span class="s2">&quot;component&quot;</span><span class="p">,</span> <span class="s2">&quot;my.lib.Comp&quot;</span> <span class="p">)</span><span class="nb">&gt;</span>
<span class="nb">&lt;/cffunction&gt;</span>
</pre></div><p>then you can get a reference to it in Java like this:</p>
<div class="highlight"><pre><span class="n">Component</span> <span class="n">cfc</span> <span class="o">=</span> <span class="o">(</span><span class="n">Component</span><span class="o">)</span> <span class="n">pc</span><span class="o">.</span><span class="na">getVariable</span><span class="o">(</span> <span class="s">&quot;Application.myCfc&quot;</span> <span class="o">);</span>

<span class="k">if</span> <span class="o">(</span> <span class="n">cfc</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span> <span class="o">{</span>
	<span class="o">...</span> <span class="k">do</span> <span class="n">something</span> <span class="n">with</span> <span class="n">cfc</span> <span class="o">...</span>
<span class="o">}</span>
</pre></div><p>alternatively, if you want to create a new CFC in your Java code, you can use the PageContext's loadComponent method:</p>
<div class="highlight"><pre><span class="c1">// this will cause Lucee to search it&#39;s component mapping paths for my.lib.Comp and create a new component</span>
<span class="n">Component</span> <span class="n">cfc</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">loadComponent</span><span class="o">(</span> <span class="s">&quot;my.lib.Comp&quot;</span> <span class="o">);</span>

<span class="c1">// set it to a variable in the Application scope</span>
<span class="n">pc</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span> <span class="s">&quot;Application.myCfc&quot;</span><span class="o">,</span> <span class="n">cfc</span> <span class="o">);</span>
</pre></div><h3>Calling CFC Methods from Java</h3><p>once you have a reference to a CFC you can invoke its methods by using the call() or callWithNamedValues() methods:</p><h4>calling method with no arguments</h4>
<div class="highlight"><pre><span class="c1">// call the CFC&#39;s funcation getLastName with no args (empty array):</span>
<span class="n">String</span> <span class="n">lastName</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">cfc</span><span class="o">.</span><span class="na">call</span><span class="o">(</span> <span class="n">pc</span><span class="o">,</span> <span class="s">&quot;getLastName&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">);</span>
</pre></div><h4>calling method with ordered arguments</h4>
<div class="highlight"><pre><span class="c1">// execute the cfc with ordered arguments</span>
<span class="n">cfc</span><span class="o">.</span><span class="na">call</span><span class="o">(</span> <span class="n">pc</span><span class="o">,</span> <span class="s">&quot;setLastName&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[]{</span> <span class="s">&quot;Smith&quot;</span> <span class="o">}</span> <span class="o">);</span>
</pre></div><h4>calling method with named arguments</h4>
<div class="highlight"><pre><span class="c1">// execute the cfc with named arguments</span>
<span class="n">Struct</span>	<span class="n">args</span>	<span class="o">=</span>	<span class="n">engine</span><span class="o">.</span><span class="na">getCreationUtil</span><span class="o">().</span><span class="na">createStruct</span><span class="o">();</span>
<span class="n">args</span><span class="o">.</span><span class="na">set</span><span class="o">(</span> <span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="s">&quot;Smith&quot;</span> <span class="o">);</span>
<span class="n">cfc</span><span class="o">.</span><span class="na">callWithNamedValues</span><span class="o">(</span> <span class="n">pc</span><span class="o">,</span> <span class="s">&quot;setLastName&quot;</span><span class="o">,</span> <span class="n">args</span> <span class="o">);</span>
</pre></div><h2>Other Useful Methods of the PageContext class</h2><h4>Get Lucee Scopes</h4>
<div class="highlight"><pre><span class="n">Scope</span> <span class="n">varialbesScope</span>	<span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">variablesScope</span><span class="o">();</span>

<span class="n">Scope</span> <span class="n">requestScope</span>	<span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">requestScope</span><span class="o">();</span>

<span class="n">Scope</span> <span class="n">sessionScope</span>	<span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">sessionScope</span><span class="o">();</span>

<span class="n">Scope</span> <span class="n">applicationScope</span>	<span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">applicationScope</span><span class="o">();</span>
</pre></div><h3>Get/Set Variables</h3>
<div class="highlight"><pre><span class="c1">// get variable by using its fully qualified name</span>
<span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">pc</span><span class="o">.</span><span class="na">getVariable</span><span class="o">(</span> <span class="s">&quot;session.username&quot;</span> <span class="o">);</span>

<span class="c1">// set variable by using its fully qualified name</span>
<span class="n">pc</span><span class="o">.</span><span class="na">setVariable</span><span class="o">(</span> <span class="s">&quot;session.username&quot;</span><span class="o">,</span> <span class="s">&quot;Susanne&quot;</span> <span class="o">);</span>

<span class="c1">// get variable from scope obtained earlier</span>
<span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">sessionScope</span><span class="o">.</span><span class="na">get</span><span class="o">(</span> <span class="s">&quot;username&quot;</span> <span class="o">);</span>

<span class="c1">// set variable in scope obtained earlier</span>
<span class="n">sessionScope</span><span class="o">.</span><span class="na">set</span><span class="o">(</span> <span class="s">&quot;username&quot;</span><span class="o">,</span> <span class="s">&quot;Susanne&quot;</span> <span class="o">);</span>
</pre></div><p>(of course, as with your CFML code, you should only set values to shared objects in a synchronized manner)</p><h3>Create CF Objects</h3>
<div class="highlight"><pre><span class="c1">// get a reference to the creation utility class</span>
<span class="n">Creation</span>	<span class="n">creationUtil</span>		<span class="o">=</span>	<span class="n">engine</span><span class="o">.</span><span class="na">getCreationUtil</span><span class="o">();</span>

<span class="c1">// create CF Array</span>
<span class="n">lucee</span><span class="o">.</span><span class="na">runtime</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">Array</span> <span class="n">cfArray</span>	<span class="o">=</span>	<span class="n">creationUtil</span><span class="o">.</span><span class="na">createArray</span><span class="o">();</span>

<span class="c1">// create CF Struct</span>
<span class="n">lucee</span><span class="o">.</span><span class="na">runtime</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">Struct</span> <span class="n">cfStruct</span>	<span class="o">=</span>	<span class="n">creationUtil</span><span class="o">.</span><span class="na">createStruct</span><span class="o">();</span>

<span class="c1">// create CF Query named qNames with two columns (firstName and lastName) and 1 row</span>
<span class="n">lucee</span><span class="o">.</span><span class="na">runtime</span><span class="o">.</span><span class="na">type</span><span class="o">.</span><span class="na">Query</span> <span class="n">cfQuery</span>	<span class="o">=</span>	<span class="n">creationUtil</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span> <span class="s">&quot;firstName&quot;</span><span class="o">,</span><span class="s">&quot;lastName&quot;</span> <span class="o">},</span> <span class="mi">1</span><span class="o">,</span> <span class="s">&quot;qNames&quot;</span> <span class="o">);</span>
</pre></div><h3>Decision Util</h3>
<div class="highlight"><pre><span class="n">Decision</span> <span class="n">decisionUtil</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="na">getDecisionUtil</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span> <span class="n">decisionUtil</span><span class="o">.</span><span class="na">isDate</span><span class="o">(</span> <span class="n">obj</span><span class="o">,</span> <span class="kc">false</span> <span class="o">)</span> <span class="o">||</span> <span class="n">decisionUtil</span><span class="o">.</span><span class="na">isStruct</span><span class="o">(</span> <span class="n">obj</span> <span class="o">)</span> <span class="o">);</span>
</pre></div><h3>Operations Util</h3>
<div class="highlight"><pre><span class="n">Operation</span> <span class="n">opUtil</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="na">getOperatonUtil</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="n">opUtil</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span> <span class="n">left</span><span class="o">,</span> <span class="n">right</span> <span class="o">);</span>	<span class="c1">// cfml comparison rules</span>
<span class="k">if</span> <span class="o">(</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">{</span>
	<span class="c1">// negative value = &quot;left&quot; is Less Than &quot;right&quot;</span>
<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">{</span>
	<span class="c1">// positive value = &quot;left&quot; is Greater than &quot;right&quot;</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
	<span class="c1">// zero = &quot;left&quot; Equals &quot;right&quot;</span>
<span class="o">}</span>
</pre></div><h3>Casting</h3>
<div class="highlight"><pre><span class="n">Cast</span> <span class="n">castUtil</span>	<span class="o">=</span>	<span class="n">engine</span><span class="o">.</span><span class="na">getCastUtil</span><span class="o">();</span>
<span class="n">castUtil</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span> <span class="n">obj</span> <span class="o">);</span>
<span class="n">castUtil</span><span class="o">.</span><span class="na">toStruct</span><span class="o">(</span> <span class="n">obj</span> <span class="o">);</span>
</pre></div><h3>Exceptions Util</h3>
<div class="highlight"><pre><span class="n">Excepton</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="na">getExceptionUtil</span><span class="o">();</span>

<span class="k">if</span> <span class="o">(</span> <span class="n">doAbort</span> <span class="o">)</span>
	<span class="k">throw</span> <span class="n">exp</span><span class="o">.</span><span class="na">createAbort</span><span class="o">();</span>
<span class="k">else</span>
	<span class="k">throw</span> <span class="n">exp</span><span class="o">.</span><span class="na">createApplicationException</span><span class="o">(</span> <span class="s">&quot;this is wrong&quot;</span><span class="o">,</span> <span class="s">&quot;you cannot ...&quot;</span> <span class="o">);</span>
</pre></div><h3>Evaluate</h3>
<div class="highlight"><pre><span class="n">Object</span>	<span class="n">obj</span> <span class="o">=</span>	<span class="n">pc</span><span class="o">.</span><span class="na">evaluate</span><span class="o">(</span> <span class="s">&quot;url.test=len( &#39;Lucee is awesome!&#39; )&quot;</span> <span class="o">);</span>	<span class="c1">// same as function evaluate(string)</span>
</pre></div><h4>Serialize</h4>
<div class="highlight"><pre><span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="n">pc</span><span class="o">.</span><span class="na">serialize</span><span class="o">(</span> <span class="n">obj</span> <span class="o">);</span> <span class="c1">// same as function serialize(object)</span>
</pre></div>

							
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="footer">
			<div class="container">
				<p>The Lucee Documentation is developed and maintained by the Lucee Association Switzerland and is licensed under a
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
				</p>
			</div>
		</footer>

		<script src="assets/js/base.min.js" type="text/javascript"></script>
	</body>
</html>