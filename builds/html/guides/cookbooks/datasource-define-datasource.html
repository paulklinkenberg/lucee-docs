<!DOCTYPE html>
<html>
	<head>
		<title>Lucee Documentation :: Defining a datasource</title>
		<base href="../../">

		<meta content="initial-scale=1.0, width=device-width" name="viewport">

		<link href="assets/css/base.min.css" rel="stylesheet">
		<link href="assets/css/highlight.css" rel="stylesheet">
		<link rel="icon" type="image/png" href="assets/images/favicon.png">

		<!-- ie -->
		<!--[if lt IE 9]>
			<script src="assets/js/html5shiv.js" type="text/javascript"></script>
			<script src="assets/js/respond.js" type="text/javascript"></script>
		<![endif]-->
	</head>

	<body class="page">
		<nav class="menu menu-left nav-drawer" id="menu">
			<div class="menu-scroll">
				<div class="menu-wrap">
					<div class="menu-content">
						<a class="nav-drawer-logo" href="index.html"><img class="Lucee" src="assets/images/lucee-logo-bw.png"></a>
						<ul class="nav">
		
			
		
			
		
			
				
				
				<li class="active ">

					<a href="guides/getting-started.html">Getting Started</a>

					
					


					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="reference.html">Reference</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#reference" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="reference">
							
						
							
								
								
								<li><a href="reference/functions.html">Lucee functions</a></li>
							
						
							
								
								
								<li><a href="reference/tags.html">Lucee tags</a></li>
							
						
							
								
								
								<li><a href="reference/unsupported.html">Unsupported Tags &amp; Functions</a></li>
							
						
							
								
								
								<li><a href="reference/additional.html">Additional Tags &amp; Functions</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class="active ">

					<a href="guides.html">Guides and tutorials</a>

					
					


					
						<span class="menu-collapse-toggle " data-target="#guides" data-toggle="collapse" aria-expanded="true">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse expand" id="guides">
							
						
							
								
								
									
								
								<li class="active"><a href="guides/getting-started.html">Getting Started</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/running-lucee.html">Running Lucee</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/updating-lucee.html">Updating Lucee</a></li>
							
						
							
								
								
									
								
								<li class="active"><a href="guides/cookbooks.html">Cookbook</a></li>
							
						
							
								
								
								<li><a href="guides/working-with-source.html">Working with the Lucee Source</a></li>
							
						
							
								
								
								<li><a href="guides/extensions.html">Extensions</a></li>
							
						
							
								
								
								<li><a href="guides/about-lucee.html">About Lucee</a></li>
							
						
							
								
								
								<li><a href="guides/lucee-5.html">Lucee 5</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="categories.html">Categories</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#categories" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="categories">
							
						
							
								
								
								<li><a href="categories/ajax.html">Ajax features</a></li>
							
						
							
								
								
								<li><a href="categories/array.html">Arrays</a></li>
							
						
							
								
								
								<li><a href="categories/binary.html">Binary data</a></li>
							
						
							
								
								
								<li><a href="categories/boolean.html">Booleans</a></li>
							
						
							
								
								
								<li><a href="categories/collection.html">Collections</a></li>
							
						
							
								
								
								<li><a href="categories/component.html">Components (CFCs)</a></li>
							
						
							
								
								
								<li><a href="categories/currency.html">Currency features</a></li>
							
						
							
								
								
								<li><a href="categories/date.html">Date and time</a></li>
							
						
							
								
								
								<li><a href="categories/decision.html">Decision logic</a></li>
							
						
							
								
								
								<li><a href="categories/formatting.html">Formatting</a></li>
							
						
							
								
								
								<li><a href="categories/html.html">HTML</a></li>
							
						
							
								
								
								<li><a href="categories/image.html">Image manipulation</a></li>
							
						
							
								
								
								<li><a href="categories/javascript.html">JavaScript</a></li>
							
						
							
								
								
								<li><a href="categories/json.html">JSON</a></li>
							
						
							
								
								
								<li><a href="categories/ldap.html">LDAP</a></li>
							
						
							
								
								
								<li><a href="categories/list.html">Lists</a></li>
							
						
							
								
								
								<li><a href="categories/math.html">Math</a></li>
							
						
							
								
								
								<li><a href="categories/number.html">Numbers</a></li>
							
						
							
								
								
								<li><a href="categories/parsing.html">Parsing</a></li>
							
						
							
								
								
								<li><a href="categories/pdf.html">PDFs</a></li>
							
						
							
								
								
								<li><a href="categories/query.html">Queries</a></li>
							
						
							
								
								
								<li><a href="categories/regex.html">Regex</a></li>
							
						
							
								
								
								<li><a href="categories/sort.html">Sorting</a></li>
							
						
							
								
								
								<li><a href="categories/string.html">Strings</a></li>
							
						
							
								
								
								<li><a href="categories/struct.html">Structures</a></li>
							
						
							
								
								
								<li><a href="categories/video.html">Video</a></li>
							
						
							
								
								
								<li><a href="categories/wddx.html">WDDX</a></li>
							
						
							
								
								
								<li><a href="categories/webservice.html">Web services</a></li>
							
						
							
								
								
								<li><a href="categories/xml.html">XML</a></li>
							
						
							
								
								
								<li><a href="categories/zip.html">Zip files</a></li>
							
						
					
						</ul>
					
				</li>
			
		
			
				
				
				<li class=" ">

					<a href="docs.html">About the docs</a>

					
					


					
						<span class="menu-collapse-toggle collapsed" data-target="#about" data-toggle="collapse" aria-expanded="0">
							<i class="icon icon-close menu-collapse-toggle-close"></i>
							<i class="icon icon-add menu-collapse-toggle-default"></i>
						</span>
						<ul class="menu-collapse collapse" id="about">
							
						
							
								
								
								<li><a href="docs/content.html">Content</a></li>
							
						
							
								
								
								<li><a href="docs/build.html">Build</a></li>
							
						
					
						</ul>
					
				</li>
			
		
	</ul>
						<hr>
						<ul class="nav">
							<li>
								<a href="http://lucee.org"><span class="fa fa-fw fa-globe"></span>Lucee Website</a>
							</li>
							<li>
								<a href="https://github.com/lucee/lucee-docs"><span class="fa fa-fw fa-github"></span>Source repository</a>
							</li>
							<li>
								<a href="http://javadoc.lucee.org"><span class="fa fa-fw fa-code"></span>JavaDocs</a>
							</li>
							<li>
								<a href="download.html"><span class="fa fa-fw fa-download"></span>Download</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

		<header class="header">
			<ul class="hidden-lg nav nav-list pull-left">
				<li>
					<a class="menu-toggle" href="#menu">
						<span class="access-hide">Menu</span>
						<span class="icon icon-menu icon-lg"></span>
						<span class="header-close icon icon-close icon-lg"></span>
					</a>
				</li>
			</ul>
			<a class="header-logo hidden-lg" href="index.html"><img alt="Lucee" src="assets/images/lucee-logo.png"></a>
			<ul class="nav nav-list pull-right">
				
				
				
					<li>
						<a href="/guides/cookbooks/cached-within-request.html">
							<span class="access-hide">Previous page: Cache a query for the current request</span>
							<span class="icon icon-arrow-back icon-lg"></span>
						</a>
					</li>
				
				
					<li>
						<a href="/guides/cookbooks/filesystem-mapping-define-mapping.html">
							<span class="access-hide">Previous page: File system mapping - Define a mapping</span>
							<span class="icon icon-arrow-forward icon-lg"></span>
						</a>
					</li>
				
				<li>
					<a class="menu-toggle" href="#search">
						<span class="access-hide">Search</span>
						<span class="icon icon-search icon-lg"></span>
						<span class="header-close icon icon-close icon-lg"></span>
					</a>
				</li>
			</ul>
			<span class="header-fix-show header-logo pull-none text-overflow">Defining a datasource</span>
		</header>
		<div class="menu menu-right menu-search" id="search">
			<div class="menu-scroll">
				<div class="menu-wrap">
					<div class="menu-content">
						<div class="menu-content-inner">
							<label class="access-hide" for="lucee-docs-search-input">Search</label>
							<input class="form-control form-control-lg menu-search-focus" id="lucee-docs-search-input" placeholder="Search" type="search">
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="content">
			<div class="content-heading">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1">
							<h1 class="heading">Defining a datasource</h1>
						</div>
					</div>
				</div>
			</div>

			<div class="content-inner">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1 body">
							<div class="tile-wrap">
								<div class="tile">
									<ul class="breadcrumb margin-no-top margin-right margin-no-bottom margin-left">
			<li><a href="index.html">Home</a></li>
			
				<li><a href="guides.html">Guides and tutorials</a></li>
			
				<li><a href="guides/cookbooks.html">Cookbook</a></li>
			
			<li class="active">Defining a datasource</li>
		</ul>
								</div>
							</div>
							<a class="pull-right" href="https://github.com/lucee/lucee-docs/edit/master/docs/04.guides/04.cookbooks/07.datasource-define-datasource/page.md" title="Improve the docs"><i class="fa fa-pencil fa-fw"></i></a>
	<h1>How to define a Datasource</h1>
<p>To execute queries you need a datasource definition, a datasource definition point this a specific local or remote datasource, there are different ways to do so.</p>
<h2>Create a Datasource in the Administrator</h2>
<p>The most common way is to define a Datasource is in the Lucee Server or Web Administrator.
The only difference between the Web and Server Administrator is, that datasources defined in the Server Administrator are visible to all web contexts and datasources defined in the Web Administrator only to the current web context.
In your Administrator go to the Page &quot;Services/Datasource&quot;, in the section &quot;create new Datasource&quot; choose a name for your datasource and the type of your Datasource, for example &quot;MySQL&quot;.</p>
<p><img src="https://bitbucket.org/repo/rX87Rq/images/3802808059-createds.png" alt="create datasource" /></p>
<p>On the following page you can define settings to connect to your datasource, the look and feel of this page depends on the datasource type used.
After saving this page you get back to the overview page and you will get a feedback if Lucee was able to connect to your datasource or not.</p>
<h2>Create a Datasource in the Application.cfc</h2>
<p>You cannot only define a datasource in the Lucee Administrator, you can also do this in the <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a>, the easiest way to do so, is to create first a datasource in the Administrator (see above) and then go to the detail view of this datasource by clicking the &quot;edit button&quot;</p>
<p><img src="https://bitbucket.org/repo/rX87Rq/images/4142224660-select-datasource.png" alt="select datasource" /></p>
<p>At the bottom of the detail page you find a box that will look like this</p>
<p><img src="https://bitbucket.org/repo/rX87Rq/images/1656402808-datasource-app-def.png" alt="datasource application definition" /></p>
<p>You can simply copy the code inside the box to your <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a> body, Lucee will pick then this definition.
After that you can delete the datasource you have defined in the Administrator.</p>
<h3>Advanced</h3>
<p>Like you can see, the code for a datasource definition has this pattern (class,  connectionString, username and password)</p>
<div class="highlight"><pre>#!javascript
<p>this.datasources[&quot;myds&quot;] = {
class: 'org.gjt.mm.mysql.Driver'
, connectionString: 'jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useLegacyDatetimeCode=true'
, username: 'root'
, password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot;
};</p>
</pre></div>
<p>but alternatively you can also use this pattern</p>
<div class="highlight"><pre>#!javascript
<p>this.datasources[&quot;myds&quot;] = {
// required
type: 'mysql'
, host: 'localhost'
, database: 'test'
, port: 3306
, username: 'root'
, password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot;</p>
<pre><code>    // optional
    , connectionLimit: -1 // how many connections are allowed maximal (-1 == infiniti)
    , connectionTimeout:1 // connection timeout in minutes (0 == connection is released after usage)
    , blob: false // enable blob
    , clob: false // enable clob
    , storage: false // allow to use this datasource as a session/application storage
    , timezone: &amp;#39;CET&amp;#39;  // if set Lucee change the environment timezone
    , custom: {useUnicode:true,characterEncoding:&amp;#39;UTF-8&amp;#39;} // a struct that contains type specific settings
</code></pre>
<p>};</p>
</pre></div>
<h3>Default Datasource</h3>
<p>With the <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a> you can also define a default datasource that is used if not &quot;datasource&quot; attribute is defined with the tag cfquery, cfstoredproc, cfinsert, cfupdate, ..., simply do the following</p>
<div class="highlight"><pre>#!javascript
<p>this.defaultdatasource = &quot;myds&quot;; // &quot;this.datasource&quot; is supported as well</p>
</pre></div>
<p>In that case the datasource &quot;myds&quot; is used, if there is no datasource defined. Instead of defining a datasource name, you can also define the datasource directly as follows
<div class="highlight"><pre>#!javascript</p>
<p>this.datasource = {
class: 'org.gjt.mm.mysql.Driver'
, connectionString: 'jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useLegacyDatetimeCode=true'
, username: 'root'
, password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot;
};</p>
</pre></div>

							
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="footer">
			<div class="container">
				<p>The Lucee Documentation is developed and maintained by the Lucee Association Switzerland and is licensed under a
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
				</p>
			</div>
		</footer>

		<script src="assets/js/base.min.js" type="text/javascript"></script>
	</body>
</html>