<!DOCTYPE html>
<html>
	<head>
		<title>Lucee Documentation :: Building Lucee from source</title>
		<base href="">
		<meta content="initial-scale=1.0, width=device-width" name="viewport">
		<link href="assets/css/base.min.css" rel="stylesheet">
		<link href="assets/css/highlight.css" rel="stylesheet">
		<link rel="icon" type="image/png" href="assets/images/favicon.png">
	</head>

	<body class="page" style="margin-bottom:150px;">
		<header class="header">
			<a class="header-logo hidden-lg" href="index.html"><img alt="Lucee" src="assets/images/lucee-logo.png"></a>
			<ul class="nav nav-list pull-right">
				
				
				
					<li>
						<a href="working-with-source.html">
							<span class="access-hide">Previous page: Working with the Lucee Source</span>
							<span class="icon icon-arrow-back icon-lg"></span>
						</a>
					</li>
				
				
					<li>
						<a href="working-with-source-java-using-lucee-in-java.html">
							<span class="access-hide">Previous page: Using Lucee in Java</span>
							<span class="icon icon-arrow-forward icon-lg"></span>
						</a>
					</li>
				
			</ul>
			<span class="header-fix-show header-logo pull-none text-overflow">Building Lucee from source</span>
		</header>

		<div class="content">
			<div class="content-heading">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1">
							<h1 class="heading">Building Lucee from source</h1>
						</div>
					</div>
				</div>
			</div>

			<div class="content-inner">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1 body">
							<div class="tile-wrap">
								<div class="tile">
									<ul class="breadcrumb margin-no-top margin-right margin-no-bottom margin-left">
			<li><a href="index.html">Home</a></li>
			
				<li><a href="guides.html">Guides and tutorials</a></li>
			
				<li><a href="working-with-source.html">Working with the Lucee Source</a></li>
			
			<li class="active">Building Lucee from source</li>
		</ul>
								</div>
							</div>
							<a class="pull-right" href="https://github.com/lucee/lucee-docs/edit/master/docs/04.guides/05.working-with-source/01.build-from-source/page.md" title="Improve the docs"><i class="fa fa-pencil fa-fw"></i></a>
	<h1>Building from source</h1><p>The following text assumes that you have basic knowledge of how to use git and ant, if not please first consult the documentation for this tools.</p><h3>1. Before you get started</h3><p>Before you can start building Lucee from source, you will need a few things installed on your machine:</p>
<ol>
  <li><p><strong>Java JDK</strong> - since you're going to compile Java code you need the JDK and not just the JRE. Lucee requires JDK 6 or later in order to compile. http://www.oracle.com/technetwork/java/javase/downloads/</p></li>
  <li><p><strong>Apache ANT</strong> - the source code contains several build scripts that will automate the build process for you. you will need ANT installed in order to run these build scripts. http://ant.apache.org/bindownload.cgi</p></li>
</ol><h3>2. Get the source code</h3><p>Lucee's source code is version-controlled with GIT and is hosted on bitbucket.com <a href="https://bitbucket.org/lucee/lucee">Bitbucket</a> (chances are that this is where you're reading this right now ;]).</p><p>The repository contains a few branches, with the most important ones being "Master" (current release) and "Develop" (alpha and beta releases).</p><p>So simply clone the repository to your local drive with the following command: $ git clone https://bitbucket.org/lucee/lucee.git</p><h3>3. Edit /lucee-core/src/lucee/runtime/Info.ini</h3><p>The build process will generate a patch file that you can deploy as an update to Lucee servers. In order for the patch to work, its version must be higher than the current version on the server that you wish to patch.</p><p>You should set the version in <strong>/lucee-java/lucee-core/src/lucee/runtime/Info.ini</strong></p><p>The content of this file will look similar to this:</p>
<pre><code>[version]
number=4.5.0.042
level=os
state=final
name=Neo
name-explanation=https://www.facebook.com/neo.cfm
release-date=2015/01/01 00:00:00 CET
</code></pre><p>Simply edit the value of the number property so that it is higher than the version on the server that you plan to patch. It is not necessary to set the release date, this is made by the build process.</p><h3>4. Build with ANT</h3><p>Open a Command Prompt (or Shell) and change the working directory to the root of the project, then simply execute:</p>
<pre><code>ant
</code></pre><p>The build process should take a less than a minute. Once it's finished, you can find the newly built patch files in /dist/**.</p><p>To also build the different bundles we provide to download (war, jars, express, tomcat installer), simply execute:</p>
<pre><code>ant express
</code></pre><p>to build Lucee and the express bundles</p>
<pre><code>ant custom
</code></pre><p>to build Lucee and all custom bundles (jars zip, war file ...)</p>
<pre><code>ant installer
</code></pre><p>to builld Lucee and the Tomcat installers</p>
<pre><code>ant all
</code></pre><p>to build everything mention above</p><h3>Java notes</h3><p>Currently the build process requires Java 6 to build successfully, however support for Java 7 and 8 will be added soon. Java 6 is available for Windows and Linux from the Oracle website at the following link:</p><p>http://www.oracle.com/technetwork/java/javase/archive-139210.html</p><h3>Java for Mac OS X</h3><p>For Mac OS X you will need to obtain a package from the Apple Developer site, as until Java 7, Java on Mac OS X was maintained and provided by Apple. To do this go to the following URL:</p><p>https://developer.apple.com</p><p>and sign in using an Apple developer account or register for an account (it's free). Once you have signed in go to the download section and search for the following package:</p><p>Java for OS X 2013-005 Developer Package</p><p>Download this package and install it. Once installed go to the terminal window and run <code>javac -version</code> and make sure it is version 1.6. If not then you already have another version of the Java SDK installed and need to override the Java home by adding the following to either your .profile or .bash_profile file in your home folder (whichever already exists):</p>
<pre><code>export JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/1.6.0_65-b14-462.jdk/Contents/Home/&quot;
</code></pre><p>Once you have added this, exit terminal and open a new terminal and check the Java version again using the <code>javac -version</code> command.</p><h3>Ant notes</h3><p>If when you run Ant you get an error message that says:</p>
<pre><code>java.lang.OutOfMemoryError: Java heap space
</code></pre><p>This means you need to give Ant more memory to run. To do this you can set an environment variable, ANT_OPTS, with the JVM memory settings in it, like so:</p><p>Linux / Mac: <code>export ANT_OPTS=&quot;-Xms256m -Xmx1024m&quot;</code></p><p>Windows: <code>set ANT_OPTS=-Xms256m -Xmx1024m</code></p><p>Once set this should allow Ant to run without issue. For Linux and Mac you can add this export to your bash profile to load automatically.</p><h3>IntelliJ IDEA notes</h3><p>The cloned repository can be easily imported into a new, empty Java project in IntelliJ IDEA 14. You should end up with 4 modules within the project: lucee-core, lucee-debug, lucee-instrumentaion, lucee-loader. Opening the main build.xml in the project root should give you all the build options as outlined above.</p><p>The default setup in IntelliJ IDEA provides 128m heap memory for the build process. This will most likely be not enough. The heap memory setup strategy as explained in the previous is not applicable for building from within the IDE though. Instead find the properties dialog for the build file and change the setting of 128m to 256m or as high as necessary.</p><p>Further information is provided in Jetbrains IntelliJ IDEA documentation: https://www.jetbrains.com/idea/help/controlling-behavior-of-ant-script-with-build-file-properties.html</p>
							
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="footer">
			<div class="container">
				<p>The Lucee Documentation is developed and maintained by the Lucee Association Switzerland and is licensed under a
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
				</p>
			</div>
		</footer>
	</body>
</html>