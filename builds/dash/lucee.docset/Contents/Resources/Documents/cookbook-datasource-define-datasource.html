<!DOCTYPE html>
<html>
	<head>
		<title>Lucee Documentation :: Defining a datasource</title>
		<base href="">
		<meta content="initial-scale=1.0, width=device-width" name="viewport">
		<link href="assets/css/base.min.css" rel="stylesheet">
		<link href="assets/css/highlight.css" rel="stylesheet">
		<link rel="icon" type="image/png" href="assets/images/favicon.png">
	</head>

	<body class="page" style="margin-bottom:150px;">
		<header class="header">
			<a class="header-logo hidden-lg" href="index.html"><img alt="Lucee" src="assets/images/lucee-logo.png"></a>
			<ul class="nav nav-list pull-right">
				
				
				
					<li>
						<a href="cookbook-cached-within-request.html">
							<span class="access-hide">Previous page: Cache a query for the current request</span>
							<span class="icon icon-arrow-back icon-lg"></span>
						</a>
					</li>
				
				
					<li>
						<a href="cookbook-filesystem-mapping-define-mapping.html">
							<span class="access-hide">Previous page: File system mapping - Define a mapping</span>
							<span class="icon icon-arrow-forward icon-lg"></span>
						</a>
					</li>
				
			</ul>
			<span class="header-fix-show header-logo pull-none text-overflow">Defining a datasource</span>
		</header>

		<div class="content">
			<div class="content-heading">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1">
							<h1 class="heading">Defining a datasource</h1>
						</div>
					</div>
				</div>
			</div>

			<div class="content-inner">
				<div class="container">
					<div class="row">
						<div class="col-lg-10 col-lg-push-1 body">
							<div class="tile-wrap">
								<div class="tile">
									<ul class="breadcrumb margin-no-top margin-right margin-no-bottom margin-left">
			<li><a href="index.html">Home</a></li>
			
				<li><a href="guides.html">Guides and tutorials</a></li>
			
				<li><a href="cookbook.html">Cookbook</a></li>
			
			<li class="active">Defining a datasource</li>
		</ul>
								</div>
							</div>
							<a class="pull-right" href="https://github.com/lucee/lucee-docs/edit/master/docs/04.guides/04.cookbooks/07.datasource-define-datasource/page.md" title="Improve the docs"><i class="fa fa-pencil fa-fw"></i></a>
	<h1>How to define a Datasource</h1><p>To execute queries you need a datasource definition, a datasource definition point this a specific local or remote datasource, there are different ways to do so.</p><h2>Create a Datasource in the Administrator</h2><p>The most common way is to define a Datasource is in the Lucee Server or Web Administrator. The only difference between the Web and Server Administrator is, that datasources defined in the Server Administrator are visible to all web contexts and datasources defined in the Web Administrator only to the current web context. In your Administrator go to the Page "Services/Datasource", in the section "create new Datasource" choose a name for your datasource and the type of your Datasource, for example "MySQL".</p><p><img src="https://bitbucket.org/repo/rX87Rq/images/3802808059-createds.png" alt="create datasource" /></p><p>On the following page you can define settings to connect to your datasource, the look and feel of this page depends on the datasource type used. After saving this page you get back to the overview page and you will get a feedback if Lucee was able to connect to your datasource or not.</p><h2>Create a Datasource in the Application.cfc</h2><p>You cannot only define a datasource in the Lucee Administrator, you can also do this in the <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a>, the easiest way to do so, is to create first a datasource in the Administrator (see above) and then go to the detail view of this datasource by clicking the "edit button"</p><p><img src="https://bitbucket.org/repo/rX87Rq/images/4142224660-select-datasource.png" alt="select datasource" /></p><p>At the bottom of the detail page you find a box that will look like this</p><p><img src="https://bitbucket.org/repo/rX87Rq/images/1656402808-datasource-app-def.png" alt="datasource application definition" /></p><p>You can simply copy the code inside the box to your <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a> body, Lucee will pick then this definition. After that you can delete the datasource you have defined in the Administrator.</p><h3>Advanced</h3><p>Like you can see, the code for a datasource definition has this pattern (class, connectionString, username and password)</p>
<div class="highlight"><pre>#!javascript

this.datasources[&quot;myds&quot;] = {
	  class: &#39;org.gjt.mm.mysql.Driver&#39;
	, connectionString: &#39;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useLegacyDatetimeCode=true&#39;
	, username: &#39;root&#39;
	, password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot;
};
</pre></div><p>but alternatively you can also use this pattern</p>
<div class="highlight"><pre>#!javascript

this.datasources[&quot;myds&quot;] = {
         // required
        type: &#39;mysql&#39;
        , host: &#39;localhost&#39;
        , database: &#39;test&#39;
        , port: 3306
        , username: &#39;root&#39;
        , password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot;

        // optional
        , connectionLimit: -1 // how many connections are allowed maximal (-1 == infiniti)
        , connectionTimeout:1 // connection timeout in minutes (0 == connection is released after usage)
        , blob: false // enable blob
        , clob: false // enable clob
        , storage: false // allow to use this datasource as a session/application storage
        , timezone: &#39;CET&#39;  // if set Lucee change the environment timezone
        , custom: {useUnicode:true,characterEncoding:&#39;UTF-8&#39;} // a struct that contains type specific settings
};
</pre></div><h3>Default Datasource</h3><p>With the <a href="Cookbook_ApplicationContext_Basic">Application.cfc</a> you can also define a default datasource that is used if not "datasource" attribute is defined with the tag cfquery, cfstoredproc, cfinsert, cfupdate, ..., simply do the following</p>
<div class="highlight"><pre>#!javascript

this.defaultdatasource = &quot;myds&quot;; // &quot;this.datasource&quot; is supported as well
</pre></div><p>In that case the datasource "myds" is used, if there is no datasource defined. Instead of defining a datasource name, you can also define the datasource directly as follows <div class="highlight"><pre>#!javascript</p><p>this.datasource = {  class: &#39;org.gjt.mm.mysql.Driver&#39;  , connectionString: &#39;jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF-8&amp;useLegacyDatetimeCode=true&#39;  , username: &#39;root&#39;  , password: &quot;encrypted:5120611ea34c6123fd85120a0c27ab23fd81ea34cb854&quot; }; </pre></div></p>
							
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="footer">
			<div class="container">
				<p>The Lucee Documentation is developed and maintained by the Lucee Association Switzerland and is licensed under a
					<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
				</p>
			</div>
		</footer>
	</body>
</html>